<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Egzaminator Online â€“ Test na Prawo Jazdy</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f9fc;
      color: #222;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
    }
    .container {
      width: 90%;
      max-width: 600px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #007bff;
    }
    .question {
      font-size: 1.1em;
      margin-bottom: 10px;
    }
    .answers button {
      width: 100%;
      background: #e9ecef;
      border: none;
      border-radius: 8px;
      padding: 10px;
      margin: 5px 0;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s;
    }
    .answers button:hover {
      background: #d7e3f4;
    }
    .answers button.correct {
      background: #28a745;
      color: white;
    }
    .answers button.wrong {
      background: #dc3545;
      color: white;
    }
    .hidden {
      display: none;
    }
    #next-btn {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 15px;
      cursor: pointer;
      margin-top: 15px;
      font-size: 1em;
    }
    #next-btn:hover {
      background: #0056b3;
    }
    #result {
      text-align: center;
    }
    #timer {
      text-align: right;
      font-weight: bold;
      color: #444;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Egzaminator Online</h1>
    <div id="intro">
      <p>Rozpocznij darmowy test na prawo jazdy (10 pytaÅ„). Powodzenia!</p>
      <button id="start-btn">Rozpocznij test</button>
    </div>

    <div id="quiz" class="hidden">
      <div id="timer"></div>
      <div id="question-container"></div>
      <div id="answers" class="answers"></div>
      <button id="next-btn">Dalej</button>
    </div>

    <div id="result" class="hidden"></div>

    <div id="locked-section" class="hidden">
      <p>To tylko wersja demo (10 pytaÅ„). Odblokuj peÅ‚ny test (50 pytaÅ„):</p>
      <a href="https://gum.co/egzaminatorpro" target="_blank" class="unlock-btn">ðŸ”“ Kup peÅ‚ny dostÄ™p za 9,99 zÅ‚</a>
    </div>
  </div>

  <script>
    const DEMO_QUESTIONS = [
      {q:"Co oznacza ten znak?",a:["Zakaz wjazdu","Droga z pierwszeÅ„stwem","Droga bez przejazdu"],c:0},
      {q:"Kiedy wolno uÅ¼ywaÄ‡ klaksonu?",a:["Zawsze gdy chcemy","Tylko w razie zagroÅ¼enia","Nigdy"],c:1},
      {q:"Jaki jest dopuszczalny poziom alkoholu we krwi kierowcy?",a:["0,2â€°","0,5â€°","0,0â€°"],c:0},
      {q:"Na drodze jednokierunkowej moÅ¼na:",a:["CofnÄ…Ä‡ jeÅ›li nikomu nie przeszkadzamy","ZawracaÄ‡ w dowolnym miejscu","ZatrzymaÄ‡ siÄ™ na Å›rodku"],c:0},
      {q:"Znak STOP oznacza:",a:["Zatrzymaj siÄ™ tylko gdy coÅ› jedzie","Zawsze zatrzymaj siÄ™ przed liniÄ…","Zwolnij i jedÅº dalej"],c:1},
      {q:"Kiedy naleÅ¼y wÅ‚Ä…czyÄ‡ Å›wiatÅ‚a mijania?",a:["Tylko w nocy","Zawsze w czasie jazdy","Tylko przy zÅ‚ej pogodzie"],c:1},
      {q:"Czy moÅ¼na korzystaÄ‡ z telefonu podczas jazdy?",a:["Tak, jeÅ›li trzymamy w rÄ™ce","Nie, chyba Å¼e przez zestaw gÅ‚oÅ›nomÃ³wiÄ…cy","Tak, zawsze"],c:1},
      {q:"Jak zachowaÄ‡ siÄ™ przy karetce na sygnale?",a:["PrzyspieszyÄ‡","ZatrzymaÄ‡ siÄ™ w miejscu","UstÄ…piÄ‡ jej pierwszeÅ„stwa"],c:2},
      {q:"Co naleÅ¼y zrobiÄ‡ widzÄ…c znak ustÄ…p pierwszeÅ„stwa?",a:["ZatrzymaÄ‡ siÄ™","ZachowaÄ‡ ostroÅ¼noÅ›Ä‡ i ustÄ…piÄ‡","PrzyspieszyÄ‡"],c:1},
      {q:"Jak dÅ‚ugo trwa waÅ¼noÅ›Ä‡ badaÅ„ lekarskich dla kierowcy kat. B?",a:["DoÅ¼ywotnio","10 lat","5 lat"],c:1}
    ];

    const unlocked = window.location.href.includes("premium");
    const QUESTIONS = unlocked ? DEMO_QUESTIONS.concat(DEMO_QUESTIONS, DEMO_QUESTIONS, DEMO_QUESTIONS, DEMO_QUESTIONS) : DEMO_QUESTIONS;
    
    const startBtn = document.getElementById("start-btn");
    const nextBtn = document.getElementById("next-btn");
    const quiz = document.getElementById("quiz");
    const intro = document.getElementById("intro");
    const resultDiv = document.getElementById("result");
    const questionContainer = document.getElementById("question-container");
    const answersDiv = document.getElementById("answers");
    const locked = document.getElementById("locked-section");
    const timerDiv = document.getElementById("timer");
    
    let current = 0;
    let score = 0;
    let timer;
    let timeLeft = unlocked ? 1500 : 600; // 25min lub 10min
    
    startBtn.onclick = startQuiz;
    nextBtn.onclick = nextQuestion;
    
    function startQuiz(){
      intro.classList.add("hidden");
      quiz.classList.remove("hidden");
      showQuestion();
      timer = setInterval(updateTimer, 1000);
    }

    function updateTimer(){
      timeLeft--;
      if(timeLeft <= 0){ endQuiz(); }
      const min = Math.floor(timeLeft / 60);
      const sec = timeLeft % 60;
      timerDiv.textContent = `${min}:${sec < 10 ? "0"+sec : sec}`;
    }
    
    function showQuestion(){
      const q = QUESTIONS[current];
      questionContainer.textContent = `Pytanie ${current+1}: ${q.q}`;
      answersDiv.innerHTML = "";
      q.a.forEach((ans, i) => {
        const btn = document.createElement("button");
        btn.textContent = ans;
        btn.onclick = () => selectAnswer(i);
        answersDiv.appendChild(btn);
      });
    }

    function selectAnswer(i){
      const q = QUESTIONS[current];
      const buttons = answersDiv.querySelectorAll("button");
      buttons.forEach(b => b.disabled = true);
      if(i === q.c){
        buttons[i].classList.add("correct");
        score++;
      } else {
        buttons[i].classList.add("wrong");
        buttons[q.c].classList.add("correct");
      }
    }

    function nextQuestion(){
      current++;
      if(current < QUESTIONS.length){ showQuestion(); }
      else { endQuiz(); }
    }

    function endQuiz(){
      clearInterval(timer);
      quiz.classList.add("hidden");
      resultDiv.classList.remove("hidden");
      resultDiv.innerHTML = `<h2>TwÃ³j wynik: ${score}/${QUESTIONS.length}</h2>`;
      if(!unlocked){ locked.classList.remove("hidden"); }
    }
  </script>
</body>
</html>
